[Back to table of contents](API.md)

# Log Entries
The log entries domain deals with log entries in a user's log book.

## Classes
### LogEntry Object
Describes a single log entry from a user's log book.

```json
{
	"entryId": "A globally-unique ID that identifies the log entry. (Generated upon creation.)",
	"entryTime": "REQUIRED String: A Date and Time in ISO 8601 format",
	"location": "REQUIRED String: Up to 200 characters",
	"site": "REQUIRED String: Up to 200 characters",
	"gps": {  // Optional object
		"latitude": "REQUIRED Number: Between -90.0 and 90.0",
		"longitude": "REQUIRED Number: Between -180.0 and 180.0"
	},
	"bottomTime": "Number: Bottom time minutes (must be positive)",
	"totalTime": "Number: Total dive time, including ascent/stops (must be positive and >= 'bottomTime')",
	"averageDepth": "Number: Average depth in meters",
	"maxDepth": "Number: Maximum depth in meters (must be >= 'averageDepth')",
	"weight": {  // Optional object
		"amount": "Number: Amount of weight worn in kilograms."
	}
}
```
#### Notes:
`entryId` is generated by the database when log entries are first saved. It should **not** be included in
`POST` requests but **must** be included in `PUT` requests.

## Routes
### GET /users/:userName/logs
*This call is currently incomplete. It just returns everything right now.*

### POST /users/:userName/logs
Creates new log entries. The call will allow the creation of up to 100 entries at a time.

#### Route Parameters
* **userName** - Name of the user whose log book the entries will be added to.

#### Message Body
An array of [LogEntry](#logentry-object) objects. *Note that the `entryId` property must not be set!*

#### Responses
HTTP Status Code | Details
- | -
**201 Created** | The call succeeded and the new log entries have been saved. The response body will contain the same array of [LogEntry](#logentry-object) objects that were provided in the request except that the `entryId` properties will be filled in.
**400 Bad Request** | The request was denied because there was a problem with request body. One or more entries may have failed validation, the request may have been malformed, or perhaps, more than 100 log entries were provided in the request. The details of the [Error](General.md#error-object) object returned will contain specific information.
**401 Unauthorized** | The request was denied because the request was not authenticated.
**403 Forbidden** | The request was denied because the currently logged-in user does not have sufficient permission to edit the log entries in the specified user's log book.
**404 Not Found** | The user name provided in the `:userName` parameter could not be found.
**500 Server Error** | An internal server error occurred. Log information will be provided in the [Error](General.md#error-object) object for troubleshooting.

### PUT /users/:userName/logs
Updates and replaces existing log entries. The call will allow up to 100 entries at a time to be updated.

#### Route Parameters
* **userName** - Name of the user whose log book the entries belong to.

#### Message Body
An array of [LogEntry](#logentry-object) objects with the desired modifications made to them.

#### Responses
HTTP Status Code | Details
- | -
**200 OK** | The call succeeded and the log entries have been saved. The response body will contain the same array of [LogEntry](#logentry-object) objects that were provided in the request.
**400 Bad Request** | The request was denied because there was a problem with request body. One or more entries may have failed validation, the request may have been malformed, or perhaps, more than 100 log entries were provided in the request. The details of the [Error](General.md#error-object) object returned will contain specific information.
**401 Unauthorized** | The request was denied because the request was not authenticated.
**403 Forbidden** | The request was denied because the currently logged-in user does not have sufficient permission to edit the log entries in the specified user's log book.
**404 Not Found** | The user name provided in the `:userName` parameter could not be found.
**500 Server Error** | An internal server error occurred. Log information will be provided in the [Error](General.md#error-object) object for troubleshooting.

### DELTE /users/:userName/logs
Deletes the specified log entries from the user's log book.

#### Route Parameters
* **userName** - Name of the user whose log book the entries belong to.

#### Message Body
An array of `LogEntry` IDs (as seen in the `entryId` properties of the log entries.) E.g.

```json
[
	"e53e3c02feed97b42557bf4c",
	"336ad3167c14419d6328de6e",
	"5e9d1788f382ac12be0c0333"
]
```

#### Responses
HTTP Status Code | Details
- | -
**204 No Content** | The call succeeded and the log entries have been deleted. The response body will be empty as the HTTP code suggests.
**400 Bad Request** | The request was denied because there was a problem with request body. The array may have been malformed. The details of the [Error](General.md#error-object) object returned will contain specific information.
**401 Unauthorized** | The request was denied because the request was not authenticated.
**403 Forbidden** | The request was denied because the currently logged-in user does not have sufficient permission to edit the log entries in the specified user's log book.
**404 Not Found** | The user name provided in the `:userName` parameter could not be found.
**500 Server Error** | An internal server error occurred. Log information will be provided in the [Error](General.md#error-object) object for troubleshooting.
